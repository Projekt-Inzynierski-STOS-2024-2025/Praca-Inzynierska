% LTex: language=pl
\section{Problemy aktualnego systemu i~propozycja rozwiązań}
\indent Obecnie, system używa pojedynczych instancji każdego z~komponentów. Skutkiem jest zwiększenie przewidywalności działania oraz uproszczenie struktury kodu. Badając czas działania komponentów, można zauważyć, że moduł kompilujący wykonuje się najdłużej. Jest to spodziewany rezultat, ze względu na konieczność skanowania, analizowania, optymalizowania i~generowania kodu\cite{procesKompilacji}. Ten proces jest powtarzany dla każdego zadania, co już przy niewielkiej liczbie studentów publikujących kod w~tym samym czasie, powoduje znaczne wydłużenie czasu oczekiwania na wynik. Szczególnie widoczne jest to w~okresie końcowych terminów przesyłania zadań projektowych, które często zawierają skomplikowaną do kompilacji i~oceny logikę. Efektywnym rozwiązaniem byłoby uruchomienie kilku instancji modułu kompilującego pracujących jednocześnie. Moduł ten jest przystosowany do uruchamiania w~postaci kontenera działającego na platformie do konteneryzacji Docker, co ułatwia proces tworzenia nowych instancji. Trudnością jest konieczność przetwarzania wielu zadań na raz przez moduł sprawdzający i synchronizacja między modułem sprawdzającym a~wieloma modułami kompilującymi. Ich komunikacja odbywa się poprzez przesyłanie tekstowych wiadomości przez nazwany potok. Przy nasłuchującym trybie pracy wszystkich modułów kompilujących, będą one konkurować o~odczyt danych. Skutkiem jest niepoprawne pobranie komendy z~potoku. Z~racji okresowego występowania zwiększenia zapotrzebowania na moc obliczeniową systemu, nie jest wymagane, by uruchomionych było wiele kontenerów jednocześnie. Docelowy system, powinien posiadać mechanizm umożliwiający skalowanie horyzontalne systemu poprzez możliwość stworzenia określonej liczby instancji kontenerów w~przypadku zwiększonego ruchu.
\newline \indent Złożoność obecnego systemu niesie ryzyko wystąpienia defektu na każdym z~etapów jego działania. W~większości systemów, w~celu kontroli poprawności działania programu, stosowane są dzienniki zdarzeń w~postaci logów. Mogą być one analizowane przez administratora lub inżyniera oprogramowania, by wychwycić i~naprawić defekt. W~krytycznych serwisach ważne jest zadbanie o~czytelny i~prosty w~interpretacji monitoring. Można go uzyskać przez utworzenie paneli prezentujących wykresy metryk oraz logów. Obecny system informuje o~aktualnym stanie jedynie przez niestrukturyzowane, tekstowe komunikaty wyświetlane na konsoli. Nie istnieje archiwum zapisujące historię zdarzeń. Ponadto, każdy cykl oceny zadania, czyści wszystkie związane z~nim pliki, by przygotować się do oceny następnego. Połączenie tych cech powoduje, że w~przypadku kompilacji kodu powodującego awarię systemu, bardzo ciężko jest znaleźć przyczynę oraz kod, który to spowodował. Tworzony system powinien umożliwić zbieranie, przechowywanie i~analizę logów. Interesujące zdarzenia, powinny być zapisywane do dziennika logów, a~te powinny być przesyłane do narzędzia, które pozwoli na ich gromadzenie i~analizę. Istnieje wiele systemów dostosowanych do monitorowania. Ze względu na znajomość rozwiązania oraz bezpłatną licencję użytkowania zawierającą wystarczające w~naszym systemie funkcjonalności, proponujemy użycie platformy Elasticstack\cite{elastic}, opracowanej przez firmę Elastic. Oprócz poprawnego podłączenia rozwiązania do nowego systemu, ze względu na mnogość funkcjonalności należy również opracować instrukcję użytkowania oraz przygotować przykładowe konfiguracje monitoringu, prezentujące możliwości platformy. Darmowa licencja umożliwia na przeglądanie i~wizualizację danych oraz definiowanie alarmów. By uzyskać funkcjonalności związane z~analizą danych przez sztuczną inteligencję, bezpieczeństwem, integracją z~innymi narzędziami, przetwarzaniem w~chmurze, a~także wsparcie techniczne ze strony firmy, należy wykupić odpowiednią licencję\cite{elasticLicencje}.
\newline \indent W~związku z~zakupem serwera posiadającego większą moc obliczeniową, system STOS zostanie przeniesiony z~obecnego komputera na nową maszynę. Tworzone rozwiązanie musi być dostosowane do systemu gospodarza oraz powinien jak najlepiej wykorzystywać jego zasoby.
\newline \indent Przygotowanie platformy STOS polega na ręcznym uruchomieniu skryptów, które tworzą kontener z~modułem kompilującym oraz modułu sprawdzającego. W~przypadku zatrzymania działania systemu, awarii, konieczności zmiany wersji, odłączenia zasilania, lub zawieszenia się procesu, należy podłączyć się do maszyny i~uruchomić lub zrestartować wcześniej wspomniane skrypty. Jest to uciążliwe ze względu na konieczność regularnego monitorowania stanu platformy i~konieczności posiadania wiedzy o~wymaganej konfiguracji oraz kolejności uruchamiania. Docelowe rozwiązanie, powinno umożliwić na ciągłe działanie systemu, szczególnie podatnych na awarię modułów kompilujących. Cel można osiągnąć poprzez wysyłanie wiadomości potwierdzających działanie komponentu (tak zwane wiadomości typu „healthcheck”), równoległe działanie kilku instancji serwisów oraz monitorowanie sygnałów zakończenia procesów i~próbę ich naprawy lub wznowienia. w~naszym systemie zdecydowaliśmy się na zapewnienie automatycznego wznawiania jednocześnie działających instancji modułu kompilującego do określonej liczby.
\newline \indent Kluczową funkcjonalnością systemu STOS, jest ocena pracy studenta. Ocena bierze pod wzgląd pomyślność kompilacji kodu programu, identyczność wyniku z~oczekiwanym rezultatem oraz szybkość wykonania obliczeń. Wykonując serię ocen tego samego rozwiązania, można zauważyć nieidempotentność oceny czasu wykonania algorytmu. Jest ona silnie uzależniona od aktualnego obciążenia serwera gospodarza systemu STOS. w~przypadku wystąpienia procesu działającego w~tle używającego dużej ilości zasobów obliczeniowych oceniane w~tym momencie rozwiązanie studenta może wykonywać się dłużej, co może skutkować niezaliczeniem testu z~powodu przekroczenia czasu. Problem można rozwiązać poprzez wydzielenie stałego rozmiaru zasoby obliczeniowe procesora i~ilości pamięci dla komponentu odpowiedzialnego za kompilację. Jest to nieefektywne rozwiązanie, ponieważ część zasobów może być niewykorzystana, a~przeznaczenie zbyt małej ich ilości może spowodować błędy podczas uruchomienia rozwiązania studenta. Alternatywą, która nie posiada tego problemu i~gwarantuje uniezależnienie czasu wykonania od obciążenia systemu, jest zliczanie wykonanych niskopoziomowych operacji. Dla danego algorytmu z~określonym zestawem danych wejściowych liczba operacji, które wykona, jest stała. Taka informacja gwarantuje sprawiedliwą ocenę programu pod względem szybkości wykonania. Ze względu na złożoność w~implementacji oraz priorytetyzację pozostałych problemów, mechanizm nie zostanie zaimplementowany w~ramach tej pracy.